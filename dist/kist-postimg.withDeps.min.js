/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*! kist-inview 0.3.0 - Check if elements are in viewport. | Author: Ivan Nikolić, 2014 | License: MIT */
!function(a,b){var c={},d="KistInView",e=!0,f=function(){c.defaults.windowElTop=c.defaults.domRefs.windowEl.scrollTop(),c.defaults.windowElBottom=c.defaults.windowElTop+c.defaults.domRefs.windowEl.height()};c.defaults={threshold:0,windowElTop:0,windowElBottom:0,domRefs:{windowEl:a(b)}},c.isInView=function(a,b){var d=a.offset().top,e=d+a.height();return e>=c.defaults.windowElTop-b&&d<=c.defaults.windowElBottom+b},c.getElementsInView=function(b,e){var g;return f(),e=e||c.defaults.threshold,b.filter(function(b,f){return g=a.data(f,d),c.isInView(g,e)})},a[d]={},a[d].recalculateViewport=f,a.fn[d]=function(b,g){switch(e===!0&&(f(),e=!1),this.each(function(){a.data(this,d)||a.data(this,d,a(this))}),b){case"isInView":return Boolean(c.getElementsInView(this,g).length);case"getElementsInView":return c.getElementsInView(this,g);default:throw new Error(d+": Method is either undefined or doesn’t exist.")}}}(jQuery,window,document);
/*! createCache */
$.createCache=function(a){var b={};return function(c,d){return b[c]||(b[c]=$.Deferred(function(b){a(b,c)}).promise()),b[c].done(d)}};
/*! loadImage */
$.loadImage=$.createCache(function(a,b){function c(){d.onload=d.onerror=null}var d=new Image;a.then(c,c),d.onload=function(){a.resolve(b)},d.onerror=a.reject,d.src=b});
/*! kist-postimg 0.2.0 - Load images via postpone or lazyload method. | Author: Ivan Nikolić, 2014 | License: MIT */
!function(a,b){var c="KistPostimg",d="KistPostimg",e="kist.postimg",f=[],g=function(b,c){this.element=b,this.settings=a.extend({},this.defaults,c),this.instanceId="instance"+(new Date).getTime()};a.extend(g.prototype,{init:function(){return this.dfdImageState=a.Deferred(),this.getDomRefs(),a.when(this.checkPostImgState()).done(a.proxy(this.onCheckPostImgState,this)),this},getDomRefs:function(){this.domRefs=a.extend({},this.domRefs),this.domRefs.imagesEl=a(this.element)},checkPostImgState:function(){return this.domRefs.imagesEl=this.domRefs.imagesEl.filter(function(){return Boolean(a(this).data("isPostImgAlreadySet"))===!1}),this.domRefs.imagesEl.data("isPostImgAlreadySet",!0).addClass(d),0!==this.domRefs.imagesEl.length?this.dfdImageState.resolve():this.dfdImageState.reject(),this.dfdImageState.promise()},parseImages:function(b){b.each(a.proxy(function(b,c){var d=a(c);a.loadImage(d.data("src")).done(a.proxy(this.onParsedImage,this,d))},this))},onParsedImage:function(a){a.attr("src",a.data("src")).attr("alt",a.data("alt")).removeAttr("width").removeAttr("height").addClass(d+"-is-loaded"),this.domRefs.imagesEl=this.domRefs.imagesEl.not(a)}});var h=function(a,b){g.call(this,a,b)};h.prototype=new g,a.extend(h.prototype,{constructor:h,defaults:{threshold:300,scrollTimeout:300},domRefs:{windowEl:a(b)},getDomRefs:function(){g.prototype.getDomRefs.call(this),this.settings.imagesElRemainingCount=this.domRefs.imagesEl.length},bindUiActions:function(b){return Boolean(b)===!0?(this.domRefs.windowEl.off("scroll."+this.instanceId+"."+e),void this.domRefs.windowEl.off("resize."+this.instanceId+"."+e)):(this.domRefs.windowEl.on("scroll."+this.instanceId+"."+e,a.debounce(this.settings.scrollTimeout,a.proxy(this.fetchImages,this))),void this.domRefs.windowEl.on("resize."+this.instanceId+"."+e,a.debounce(this.settings.scrollTimeout,a.proxy(this.fetchImages,this))))},onCheckPostImgState:function(){this.bindUiActions(),this.fetchImages()},fetchImages:function(){0===this.settings.imagesElRemainingCount&&this.bindUiActions("unbind"),this.parseImages(this.domRefs.imagesEl.KistInView("getElementsInView",this.settings.threshold))},onParsedImage:function(){g.prototype.onParsedImage.apply(this,arguments),this.settings.imagesElRemainingCount--}});var i=function(a,b){g.call(this,a,b)};i.prototype=new g,a.extend(i.prototype,{constructor:i,onCheckPostImgState:function(){this.fetchImages()},fetchImages:function(){this.parseImages(this.domRefs.imagesEl)}}),a[c]={instances:f,defaults:h.prototype.defaults,fetchAllImages:function(){a.each(f,function(a,b){b.fetchImages()})}},a.fn[c]=function(b,d){if("string"!==a.type(arguments[0]))throw new Error(c+": Please provide image loading method.");return"postpone"===b?f.push(new h(this,d).init()):"lazyload"===b&&f.push(new i(this).init()),this}}(jQuery,window,document);